/**
 * 
 */
var myVar="";
var countInterval=0;
function myTimer2s(id) {
	myVar = setInterval(myTimer, 2000);
	function myTimer() {
		countInterval+=1;
		if(countInterval==2){
			countInterval=0;
			$("#"+id).removeClass("display-none");
			clearInterval(myVar)	
		}
	}
}

var callApi = function(api,jsonData,funct){
	var hostname = window.location.href;
	var arr = hostname.split("/");
	var host = arr[0] + "//" + arr[2] + "/";
	$.ajax({
        url: api,
        dataType: "json",
        type: "POST",
        contentType: "application/json",
        mimeType: "application/json",
        data: JSON.stringify(jsonData),
        success: function(result){
        		if(result.ec){
        			if(result.ec == 14000 ||result.ec == 14021 ||result.ec == 15000 ||result.ec == 15143 ||result.ec == 10159 ){
        				window.location.href = host+"logout";
        			}
        			if(result.ec == -11){
        				window.location.href = host+"user/chpass";
        			}
        			if(result.ec == -12){
        				window.location.href = host+"user/cpin";
        			}
        			if(result.ec == 63161){
        				 $("#dialog-mask-content-whitelistip").removeClass("display-none");
        			}
        		}
               funct(result); 
        },
        error: function(result){
        	//window.location.href = host+"logout";
        }
    });
}
var callApiCheckBalanceAsync = function(url, methodType, data){
	var json = data == null ? "" : JSON.stringify(data);
	
	var promiseObj = new Promise(function(resolve, reject) {
		var xhr = new XMLHttpRequest();
		xhr.open(methodType, url, true);
		if( methodType == "POST" ) {
			xhr.setRequestHeader("Content-Type", "application/json;charset=UTF-8");
		}
		xhr.send(json);
		
		xhr.onreadystatechange = function(){
			if (xhr.readyState === 4){
				if (xhr.status === 200){
					var resp = xhr.responseText;
					var respJson = JSON.parse(resp);
					var hostname = window.location.href;
					var arr = hostname.split("/");
					var host = arr[0] + "//" + arr[2] + "/";
	        		switch(respJson.ec) {
		        		case 10021:
		        		case 10144:
		        		case 10159:
		        		case 14000:
		        		case 14021:
		        		case 15000:
		        		case 15143:
		        			/*alert(respJson.data.message);
		        			redirectPage();*/
		        			window.location.href = host+"logout";
		        			break;
		    			default:
		        			resolve(respJson);
		    		}
				} else {
					reject(xhr.status);
					console.log("xhr failed", xhr.status);
				}
			}
		}
	});
	
	return promiseObj;
}